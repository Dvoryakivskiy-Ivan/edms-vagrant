@model EDMS.MvcClient.Models.Document
@using EDMS.MvcClient.Models

@{
    ViewData["Title"] = "Document details";
    var isAdmin = User.IsInRole("Admin");
}

<h2 class="mb-3">Document details</h2>

<div class="card">
    <div class="card-body">
        <h4 class="card-title">@Model.Title</h4>

        <div class="mb-2">
            <strong>Status:</strong> @Model.Status
        </div>

        <div class="mb-2">
            <strong>Created:</strong> @Model.CreatedAtUtc.ToLocalTime()
        </div>

        <div class="mb-2">
            <strong>Created by:</strong> @Model.CreatedBy
        </div>

        @if (!string.IsNullOrWhiteSpace(Model.DecisionBy))
        {
            <div class="mb-2">
                <strong>Decision by:</strong> @Model.DecisionBy
            </div>
        }

        @if (Model.DecisionAtUtc.HasValue)
        {
            <div class="mb-2">
                <strong>Decision at:</strong> @Model.DecisionAtUtc.Value.ToLocalTime()
            </div>
        }

        @if (!string.IsNullOrWhiteSpace(Model.DecisionComment))
        {
            <div class="mb-2">
                <strong>Comment:</strong> @Model.DecisionComment
            </div>
        }

        <hr />

        <div style="white-space:pre-wrap;">@Model.Content</div>

        <div class="mt-3">
            <a class="btn btn-outline-secondary" asp-action="Browse">Back</a>

            @if (isAdmin)
            {
                <a class="btn btn-outline-danger ms-2"
                   asp-action="Delete"
                   asp-route-id="@Model.Id">
                    Delete
                </a>
            }
        </div>
    </div>
</div>
